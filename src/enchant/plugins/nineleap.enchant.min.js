/**
 * nineleap.enchant.js
 * @version 0.3 (2012/02/01)
 * @requires enchant.js v0.4.0 or later
 */
(function(){enchant.nineleap={assets:["start.png","end.png"]};enchant.nineleap.Game=enchant.Class.create(enchant.Game,{initialize:function(a,b){enchant.Game.call(this,a,b);this.addEventListener("load",function(){var a=this;this.startScene=new SplashScene;this.startScene._element.style.zIndex=10;this.startScene.image=this.assets["start.png"];this.startScene.addEventListener("touchend",function(){if(!1==a.started){if(null!=a.onstart)a.onstart();gameStart=a.started=!0}a.currentScene==this&&a.popScene();
this.removeEventListener("touchend",arguments.callee)});this.addEventListener("keydown",function(){if(!1==this.started){if(null!=this.onstart)this.onstart();gameStart=this.started=!0}a.currentScene==a.startScene&&a.popScene();this.removeEventListener("keydown",arguments.callee)});this.pushScene(this.startScene);this.endScene=new SplashScene;this.endScene.image=this.assets["end.png"]});gameStart=this.started=this.scoreQueue=!1},loadImage:function(a,b){null==b&&(b=function(){});this.assets[a]=enchant.Surface.load(a);
this.assets[a].addEventListener("load",b)},start:function(){var a=this;if(this._intervalID)window.clearInterval(this._intervalID);else if(this._assets.length){var b={},d=this._assets.filter(function(a){return a in b?!1:b[a]=!0}),h=void 0!=this._twitterAssets?this._twitterAssets:[],i=void 0!=this._netpriceData?this._netpriceData:[],j=void 0!=this._memoryAssets?this._memoryAssets:[],e=0,f=d.length+h.length+i.length+j.length,c=0,g=d.length;for(;c<g;c++)this.load(d[c],function(){var b=new enchant.Event("progress");
b.loaded=++e;b.total=f;a.dispatchEvent(b);e==f&&(a.removeScene(a.loadingScene),a.dispatchEvent(new enchant.Event("load")))});c=0;for(g=h.length;c<g;c++)this.loadImage(h[c],function(){var b=new enchant.Event("progress");b.loaded=++e;b.total=f;a.dispatchEvent(b);e==f&&(a.removeScene(a.loadingScene),a.dispatchEvent(new enchant.Event("load")))});c=0;for(g=j.length;c<g;c++)this.loadImage(j[c],function(){var b=new enchant.Event("progress");b.loaded=++e;b.total=f;a.dispatchEvent(b);e==f&&(a.removeScene(a.loadingScene),
a.dispatchEvent(new enchant.Event("load")))});c=0;for(g=i.length;c<g;c++)this.loadImage(i[c],function(){var b=new enchant.Event("progress");b.loaded=++e;b.total=f;a.dispatchEvent(b);e==f&&(a.removeScene(a.loadingScene),a.dispatchEvent(new enchant.Event("load")))});this.pushScene(this.loadingScene)}else this.dispatchEvent(new enchant.Event("load"));this.currentTime=Date.now();this._intervalID=window.setInterval(function(){a._tick()},1E3/this.fps);this.running=!0},end:function(a,b,d){void 0!==d&&(this.endScene.image=
d);this.pushScene(this.endScene);"r.jsgames.jp"==location.hostname&&(d=function(){var d=location.pathname.match(/^\/games\/(\d+)/)[1];location.replace(["http://9leap.net/games/",d,"/result?score=",encodeURIComponent(a),"&result=",encodeURIComponent(b)].join(""))},this.endScene.addEventListener("touchend",d),window.setTimeout(d,3E3));enchant.Game.instance.end=function(){}}});enchant.nineleap.SplashScene=enchant.Class.create(enchant.Scene,{image:{get:function(){return this._image},set:function(a){for(this._image=
a;this.firstChild;)this.removeChild(this.firstChild);var b=new Sprite(a.width,a.height);b.image=a;b.x=(this.width-a.width)/2;b.y=(this.height-a.height)/2;this.addChild(b)}}})})();
