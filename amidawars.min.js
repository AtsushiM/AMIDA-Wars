enchant();
var AW=function(G){var N=function(){G.pageYOffset===0&&G.scrollTo(0,1)};G.addEventListener("load",function(){setTimeout(N,100)},false);G.onorientationchange=function(){setTimeout(N,100)};var q,O,t={USER:{UNIT:new Group,CASTLE:new Group,THUMB:new Group},ENEMY:{UNIT:new Group,CASTLE:new Group,THUMB:new Group},MAP_OPTION:{CASTLE_BASE:new Group,THUMB_BASE:new Group},EFFECT:{UNIT:new Group}},C="",K=[],y={USER:{},ENEMY:{},no:0},P={USER:[],ENEMY:[]},s={USER:[],ENEMY:[]},L={},Q={},R={},M=[],D={USER:[],ENEMY:[]},
S=[],E={},T,z=function(a,c){a===void 0&&(a={});for(var e in c)c.hasOwnProperty(e)&&(a[e]=c[e]);return a},A=function(a){a.layer.addChild(a.sprite);return a.sprite},U={},H=function(){return{TIMELIMIT:function(){return 180},FONT:function(){return"monospace"},UNIT:function(){return{IMAGE:"char.gif",CHIP_SIZE:16,FRAME_SIZE:{W:4,H:3},FRAME_LINE:16,FRAME_BLOCK:48,FRAME:{HUMAN:{LANCER:0,WARRIOR:4,KNIGHT:8,ARCHER:12,CLELIC:16,FIRE_MAGE:20,FROST_MAGE:24,WIZARD:28},UNDEAD:{BONE_DOG:32,BONE_WARRIER:36,BONE_ARCHER:40,
SPECTOR:44,BONE_SNAKE:48,GOLEM:52,SHADE:56,ARACHNE:60}},STATUS:{HUMAN:{WARRIOR:{name:"WARRIOR",frame:0,hp:2,armor:"MIDIUM",speed:1,damage:3,siege:1,reverse:4},LANCER:{name:"LANCER",frame:4,hp:3,armor:"MIDIUM",speed:1,damage:2,siege:1,reverse:2},KNIGHT:{name:"KNIGHT",frame:8,hp:4,armor:"HEAVY",speed:0.9,damage:2,siege:1,reverse:7},ARCHER:{name:"ARCHER",frame:12,hp:1,armor:"LIGHT",speed:1.1,damage:3,siege:1,reverse:3},CLELIC:{name:"CLELIC",frame:48,hp:1,armor:"NOARMOR",speed:0.5,damage:1,siege:1,reverse:2},
FIRE_MAGE:{name:"FIRE_MAGE",frame:52,hp:1,armor:"NOARMOR",speed:0.8,damage:2,siege:1,reverse:3},FROST_MAGE:{name:"FROST_MAGE",frame:56,hp:1,armor:"NOARMOR",speed:0.8,damage:2,siege:1,reverse:3},WIZARD:{name:"WIZARD",frame:60,hp:1,armor:"NOARMOR",speed:0.8,damage:3,siege:1,reverse:4}},UNDEAD:{BONE_DOG:{name:"BONE_DOG",frame:96,hp:1,armor:"LIGHT",speed:1.4,damage:2,siege:1,reverse:1},BONE_WARRIER:{name:"BONE_WARRIER",frame:100,hp:2,armor:"MIDIUM",speed:1,damage:2,siege:1,reverse:1},BONE_ARCHER:{name:"BONE_ARCHER",
frame:104,hp:1,armor:"MIDIUM",speed:1,damage:3,siege:1,reverse:1},SHADE:{name:"SHADE",frame:108,hp:1,armor:"NOARMOR",speed:0.7,damage:1,siege:1,reverse:3},BONE_SNAKE:{name:"BONE_SNAKE",frame:144,hp:2,armor:"LIGHT",speed:1.3,damage:1,siege:1,reverse:1},GOLEM:{name:"GOLEM",frame:148,hp:5,armor:"HEAVY",speed:0.5,damage:2,siege:10,reverse:6},SPECTOR:{name:"SPECTOR",frame:152,hp:1,armor:"NOARMOR",speed:0.7,damage:1,siege:1,reverse:3},ARACHNE:{name:"ARACHNE",frame:156,hp:3,armor:"MIDIUM",speed:1,damage:2,
siege:1,reverse:4}}},AI:{USER:[{direction:0,prop:"y",sign:-1,order:[1,3,0,2]},{direction:3,prop:"x",sign:-1,order:[0,2,3,1]},{direction:1,prop:"x",sign:1,order:[0,2,1,3]},{direction:2,prop:"y",sign:1,order:[3,1,2,0]}],ENEMY:[{direction:2,prop:"y",sign:1,order:[3,1,2,0]},{direction:3,prop:"x",sign:-1,order:[2,0,3,1]},{direction:1,prop:"x",sign:1,order:[2,0,1,3]},{direction:0,prop:"y",sign:1,order:[3,1,0,2]}]}}},THUMB:function(){return{IMAGE:"thumb.png",CHIP_SIZE:48,FRAME:{HUMAN:{LANCER:0,WARRIOR:1,
KNIGHT:2,ARCHER:3,CLELIC:4,FIRE_MAGE:5,FROST_MAGE:6,WIZARD:7},UNDEAD:{BONE_DOG:8,BONE_SNAKE:9,BONE_WARRIER:10,BONE_ARCHER:11,GOLEM:12,ARACHNE:13,SHADE:14,SPECTOR:15}},USER:{POSITION:[[0,384],[48,384],[96,384],[144,384],[0,432],[48,432],[96,432],[144,432]]},ENEMY:{},PROP:{}}},SCORE:function(){return{POSITION:[20,7]}},COUNTDOWN:function(){return{POSITION:[200,7]}},STATUS_VIEWER:function(){return{IMAGE:"window_status.png",POSITION:[192,384],BG_SIZE:[128,96]}},MAP:function(){return{IMAGE:"map.gif",W:320,
H:480,CHIP_SIZE:32}},CASTLE:function(){return{FRAME:[{NORMAL:8,BRAKE:9},{NORMAL:10,BRAKE:11},{NORMAL:12,BRAKE:13},{NORMAL:14,BRAKE:15}],PROP:{frame:0,brake:0,hp:2,mhp:2,unitX:0,unitY:0}}},EFFECT:function(){return{IMAGE:"effect.gif",FRAME:{EXPLOSION:[0,5]}}},SOUND:function(){return{BGM:"bgm.wav",EFFECT:{EXPLOSION:"explosion.wav"}}},TYPE:function(){return{CASTLE:"CASTLE",THUMB:"THUMB",UNIT:"UNIT",EFFECT:"EFFECT"}},HAVE:function(){return{USER:"USER",ENEMY:"ENEMY"}},POINT:function(){return{UNIT:10,CASTLE:1E3,
WIN:5E3,LOSE:-5E3,TIME:100}}}},e=H(),e={TIMELIMIT:e.TIMELIMIT(),FONT:e.FONT(),UNIT:e.UNIT(),THUMB:e.THUMB(),SCORE:e.SCORE(),COUNTDOWN:e.COUNTDOWN(),STATUS_VIEWER:e.STATUS_VIEWER(),MAP:e.MAP(),CASTLE:e.CASTLE(),EFFECT:e.EFFECT(),SOUND:e.SOUND(),TYPE:e.TYPE(),HAVE:e.HAVE(),POINT:e.POINT()};U.init=function(a){var c=e.UNIT.IMAGE,h=e.THUMB.IMAGE,f=e.MAP.IMAGE,g=e.EFFECT.IMAGE,d=e.STATUS_VIEWER.IMAGE,b=e.SOUND.EFFECT.EXPLOSION,u=e.MAP.W,m=e.MAP.H,j=a.order,l,o;C=a.race;for(l=0,o=j.length;l<o;l++)K.push({name:j[l].toUpperCase(),
onMap:false});M=a=a.map;for(l=0,o=a.length;l<o;l++)a[l]=a[l].split("");l={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,24:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,25:[0,0,1,0],99:[1,0,0,0],16:[1,0,1,0],17:[0,1,0,1],18:[1,1,1,0],19:[1,0,1,1],20:[0,1,1,0],21:[0,0,1,1],22:[1,1,0,0],23:[1,0,0,1]};var p,i,v,n,r=[],a=[].concat([[26,27,28,29,30,31,32,33,34,35],[0,1,1,1,1,1,1,1,1,2]],a,[[5,6,6,6,6,6,6,6,6,7],[36,37,38,39,40,
41,42,43,44,45],[46,47,48,49,50,51,52,46,47,48],[49,50,51,52,51,52,46,47,48,49]]);for(o=0,p=a.length;o<p;o++){v=r[o]=[];n=a[o];n.length===8&&(a[o]=n=["3"].concat(n,"4"));for(j=0,i=n.length;j<i;j++){var I=n,w=j,k=n[j];k==="\u2502"?k=16:k==="\u2500"?k=17:k==="\u251c"?k=18:k==="\u2524"?k=19:k==="\u250c"?k=20:k==="\u2510"?k=21:k==="\u2514"?k=22:k==="\u2518"?k=23:k==="\u00d7"?k=24:k==="\u25a0"?k=25:k==="\u25a1"&&(k=99);I[w]=k;v[j]=l[n[j]];n[j]===25?D.ENEMY.push([j,o]):n[j]===99&&(D.USER.push([j,o]),n[j]=
25)}}M=a;S=r;q=new Game(u,m);q.preload(c,h,f,g,d,b);q.onload=Amida;q.start()};Amida=function(){var a=e.MAP.CHIP_SIZE,c=M,h=new Map(a,a),f=q.assets[e.MAP.IMAGE],g=t.USER,d=t.ENEMY,b=e.CASTLE.FRAME,u=e.THUMB.USER.POSITION,m=e.HAVE.USER,j=t.MAP_OPTION.CASTLE_BASE,l=t.MAP_OPTION.THUMB_BASE,o=t.EFFECT.UNIT,p=q.rootScene,V=e.UNIT.CHIP_SIZE,v=e.SCORE.POSITION,n,r=e.COUNTDOWN.POSITION,I=e.STATUS_VIEWER.POSITION,w,k,F;O=document.getElementById("enchant-stage");h.image=f;h.loadData(c);h.vibrate=function(b){var a=
O.style;b+="px";clearInterval(F);F=setTimeout(function(){a.top=0;a.left=b;F=setTimeout(function(){a.top=b;a.left=0;F=setTimeout(function(){a.top=0;a.left="-"+b;F=setTimeout(function(){a.top=0;a.left=0},30)},30)},30)},30)};h.getSquere=function(b){var c,d,e=Math.floor;h.getSquere=function(b){c=e(b.x/a);d=e(b.y/a);return{x:c,y:d}};return h.getSquere(b)};h.getCollision=function(b){var a=h.getSquere(b),c=S,d=false,e,f,g;if((c=c[a.y])&&(c=c[a.x]))if(c[0]+c[1]+c[2]+c[3]===1)for(e in s){if(s.hasOwnProperty(e)){f=
s[e];for(a=0,c=f.length;a<c;a++)if(g=f[a],b.intersect(g)){d=g;break}}}else d=c;return d};E=h;statusViewer=R=new StatusViwer({mode:m,x:I[0],y:I[1]});k=L=new Score({mode:m,x:v[0],y:v[1]});n=Q=new Countdown({x:r[0],y:r[1]});n.update();for(w in D)if(D.hasOwnProperty(w)){v=D[w];for(f=0,c=v.length;f<c;f++)r=new Castle({mode:w,frame:b[f].NORMAL,brake:b[f].BRAKE,x:v[f][0]*a,y:v[f][1]*a}),r.unitX=r.x+V/2,r.unitY=r.y+V/2}for(w=0,c=K.length;w<c;w++)b=K[w].name,new Thumb({mode:m,name:b,frame:e.THUMB.FRAME[C][b],
x:u[w][0],y:u[w][1]});p.addChild(h);p.addChild(j);p.addChild(statusViewer);p.addChild(l);p.addChild(d.CASTLE);p.addChild(d.UNIT);p.addChild(g.UNIT);p.addChild(g.CASTLE);p.addChild(g.THUMB);p.addChild(d.THUMB);p.addChild(o);p.addChild(k.label);p.addChild(n);T=q.assets[e.SOUND.EFFECT.EXPLOSION];B.init();(function(){var b=false,a=e.HAVE,c=function(){q.removeEventListener(enchant.Event.ENTER_FRAME,x.exefunc);J.end();b===a.ENEMY?(b="WIN",k=e.POINT.WIN+n.getDiff()*e.POINT.TIME):b===a.USER?(b="LOSE",k=e.POINT.LOSE):
(b="DRAW",k=0);i.end();k=L.add(k);q.end(k,b+":"+k);n.stop();alert(b+":"+k)};x.add(function(){if(gameStart){var a,d;i.init();d=P.USER;J.init();n.setAfter(function(){b=true;c();return true});n.init();for(a in d)d.hasOwnProperty(a)&&d[a].init();delete x.functions.playStart;return true}return false},"playStart");x.add(function(){var a,d,e,f,h,g;if(b!==false)return c(),true;for(a in s)if(s.hasOwnProperty(a)){f=s[a];e=f.length;for(d=g=0;d<e;d++)if(h=f[d],h.hp>0)break;else g++;if(g===e){b=a;break}}return false},
"playEnd");x.init()})()};Castle=function(a){var c=e.MAP.CHIP_SIZE,h=q.assets[e.MAP.IMAGE],f=H().CASTLE().PROP,g=a.mode.toUpperCase(),d=new Sprite(c,c),b=t.MAP_OPTION.CASTLE_BASE,u=-1,m,c=new Sprite(c,c);c.image=h;c.frame=24;if(g==="USER")c.frame=16;c.x=a.x;c.y=a.y;A({layer:b,sprite:c});f.base=c;f=z(f,a);d.image=h;d=z(d,f);d.type=e.TYPE.CASTLE;s[g].push(d);d.focusOn=function(){d.scaleX=d.scaleY=1.4;d.focus=true};d.focusOff=function(){d.scaleX=d.scaleY=1;d.focus=false};m=function(){q.frame%4===0&&(d.opacity+=
0.1*u,d.opacity<=0.5?u=1:d.opacity>=1&&(u=-1))};d.blinkOn=function(){d.addEventListener(enchant.Event.ENTER_FRAME,m)};d.blinkOff=function(){d.removeEventListener(enchant.Event.ENTER_FRAME,m);d.opacity=1};d.damage=function(b){d.hp-=b.siege;if(d.hp<=0)d.hp=0,d.broke();else if(d.mhp/2>=d.hp)d.frame=d.brake};d.broke=function(){d.hp=d.opacity=d.base.opacity=0};d.checkBreak=function(){return d.hp===0?true:false};return A({layer:t[g].CASTLE,sprite:d})};Thumb=function(a){var c=e.THUMB.CHIP_SIZE,h=q.assets[e.THUMB.IMAGE],
f=H().THUMB().PROP,g=e.UNIT.STATUS[C][a.name],d=a.mode.toUpperCase(),b=new Sprite(c,c),c=new Sprite(c,c),u,m,j,l,o=enchant.Event,p=R,i=new Label;c.image=h;c.frame=16;c.x=a.x;c.y=a.y;A({layer:t.MAP_OPTION.THUMB_BASE,sprite:c});i.text=Math.ceil(g.reverse);i.font="24px "+e.FONT;i.color="#ccc";i.x=a.x+17;i.y=a.y+7;A({layer:t.MAP_OPTION.THUMB_BASE,sprite:i});f=z(f,a);b.image=h;b=z(b,f);b.unit={mode:d};b.unit=z(b.unit,g);b.type=e.TYPE.THUMB;j=b.x;l=b.y;b.addEventListener(o.TOUCH_START,function(a){if(this.canDrag===
true){u=a.x-this.x;m=a.y-this.y;var a=s.USER,c,d,e;for(d=0,e=a.length;d<e;d++)c=a[d],c.checkBreak()===false&&c.blinkOn()}p.update(b.unit)});b.addEventListener(o.TOUCH_MOVE,function(a){if(this.canDrag===true){this.x=a.x-u;this.y=a.y-m;var a=s.USER,b,c,d,e=true;for(c=0,d=a.length;c<d;c++)b=a[c],e===true&&this.intersect(b)?(b.focusOn(),e=false):b.focusOff()}});b.addEventListener(o.TOUCH_END,function(){if(this.canDrag===true){var a;a=false;var b=s.USER,c,d,e;for(d=0,e=b.length;d<e;d++)if(c=b[d],this.intersect(c)){a=
c;break}if(a)this.dragStop(),this.unit.x=a.unitX,this.unit.y=a.unitY,this.lastUnit=new Unit(this.unit),this.lastUnit.thumb=this,a.focusOff();this.x=j;this.y=l;a=s.USER;for(c=0,d=a.length;c<d;c++)b=a[c],b.checkBreak()===false&&b.blinkOff()}});b.dragStart=function(){b.canDrag=true;b.opacity=1};b.dragStop=function(){b.canDrag=false;b.opacity=0};b.reverse=function(a){var c=Math.ceil(a.reverse),d=setInterval(function(){c--;i.text=c;if(c===0)i.text="",b.dragStart(),clearInterval(d)},1E3);i.text=c;b.opacity=
0.3};P[d].push(b);b.dragStop();b.opacity=0.3;b.init=function(){b.reverse(b.unit)};return A({layer:t[d].THUMB,sprite:b})};Unit=function(a){var c=e.UNIT.CHIP_SIZE,h=e.MAP.CHIP_SIZE,f=c/2,g=q.assets[e.UNIT.IMAGE],d=a.mode.toUpperCase(),b=new Sprite(c,c),c=e.HAVE,u=e.UNIT.FRAME_LINE,m=0,j=0,l=e.UNIT.AI[d],o,p,s,v,n,r;b.direction=0;b.image=g;b=z(b,a);b.type=e.TYPE.UNIT;b.attack=function(a){a.hp-=b.damage;a.hp<=0&&a.kill();return a.hp};b.kill=function(){var a=b.x,c=b.y;new Effect({type:b.type.toUpperCase(),
x:a,y:c,frames:e.EFFECT.FRAME.EXPLOSION});T.play();delete y[d][b.myNo];t[d].UNIT.removeChild(b);typeof b.after_death==="function"&&setTimeout(function(){b.after_death(b)},b.reverse);b.thumb&&b.thumb.reverse(b)};b.checkDeath=function(){return b.hp===0?true:false};o=b.frame;b.changeUnit=function(a){o=a.frame};p=function(){return E.getSquere(b)};b.beforePoint=p();s=function(){var a=false;if(f>=h){var c,d=b.beforePoint;f-=h;if(f>0)b.direction===0?b.y+=f:b.direction===1?b.x-=f:b.direction===2?b.y-=f:b.x+=
f,b.y=Math.round(b.y),b.x=Math.round(b.x);f=0;c=p();if(c.x!==d.x||c.y!==d.y)a=true}return a};v=function(){return E.getCollision(b)};n=function(){q.frame%5===0&&(m++,m===4?(m=0,j=-1):m===3&&(j=0),j++);b.frame=o+j*u+b.direction};r=function(){var a=b.direction,c=b.speed,d=e.TYPE,h,g=l.length,j,i;r=function(){n();f+=c;for(h=0;h<g;h++)if(j=l[h],a===j.direction){b[j.prop]+=c*j.sign;if(s()&&(i=v(),i!==false))i.type!==d.CASTLE?b.direction=i[j.order[0]]===1?j.order[0]:i[j.order[1]]===1?j.order[1]:i[j.order[2]]===
1?j.order[2]:j.order[3]:B.siege(b,i);break}};r()};b.addEventListener(enchant.Event.ENTER_FRAME,r);b.stay=function(){b.removeEventListener(enchant.Event.ENTER_FRAME,r);b.addEventListener(enchant.Event.ENTER_FRAME,function(){n()})};b.myNo=y.no;y[d][y.no]=b;y.no++;d===c.USER&&(f=-f);i.unit(b);return A({layer:t[d].UNIT,sprite:b})};Score=function(a){var c=e.HAVE,h=a.mode,f=a.x,a=a.y,g=new Label,d={},b=function(a){d.total+=a;return d.total};g.font="12px "+e.FONT;g.color="#ccc";g.x=f;g.y=a;d={label:g,total:0,
rate:0.5,mode:h,point:H().POINT,add:b,update:function(){}};if(h===c.USER)d.update=function(){g.text="SCORE : "+d.total},d.add=function(a){b(a);d.update();return d.total},d.rate=1;d.update();return d};Countdown=function(a){var c=new Label,h=e.TIMELIMIT,f=0,g,d=function(){};c.font="12px "+e.FONT;c.color="#ccc";c.x=a.x;c.y=a.y;c.update=function(){c.text="TIME-LIMIT : "+(h-f)};c.init=function(){c.stop();g=setInterval(function(){f++;f>=h&&(d(),c.stop());c.update()},1E3)};c.setAfter=function(a){d=a};c.getDiff=
function(){return h-f};c.stop=function(){clearInterval(g)};return c};Effect=function(a){var c=e.UNIT.CHIP_SIZE,h=a.frames[0],f=a.frames[1],g=a.type.toUpperCase(),d=t.EFFECT[g],b=new Sprite(c,c),i=function(){q.frame%3===0&&(b.frame++,b.frame>=f&&(b.removeEventListener(enchant.Event.ENTER_FRAME,i),d.removeChild(b)))};b.image=q.assets[e.EFFECT.IMAGE];b.x=a.x;b.y=a.y;b.frame=h;b.addEventListener(enchant.Event.ENTER_FRAME,i);return A({layer:d,sprite:b})};var J={aiid:0,race:"",order:[],init:function(){var a=
J,c=e.HAVE.ENEMY,h,f,g,d=s.ENEMY,b=d.length,i=e.UNIT.STATUS,m,j,l;C==="HUMAN"?(a.race="UNDEAD",a.order="BONE_DOG,BONE_WARRIER,BONE_ARCHER,SHADE,BONE_SNAKE,GOLEM,SPECTOR,ARACHNE".split(",")):(a.race="HUMAN",a.order="LANCER,WARRIOR,KNIGHT,ARCHER,CLELIC,FIRE_MAGE,FROST_MAGE,WIZARD".split(","));i=i[a.race];m=a.order;a.aiid=setInterval(function(){j=m.length;j>0&&(g=Math.floor(Math.random()*b),g>=b&&(g=b-1),h=d[g],g=Math.floor(Math.random()*j),g>=j&&(g=j-1),l=m[g],f=i[l],m.splice(g,1),g={mode:c,direction:2,
x:h.unitX,y:h.unitY,after_death:function(a){m.push(a.name)}},g=z(g,f),f=new Unit(g))},3E3)},end:function(){clearInterval(J.aiid)}},B={init:function(){x.add(function(){var a=y.USER,c=y.ENEMY,e,f,g,d;for(g in c)if(c.hasOwnProperty(g))for(d in f=c[g],a)a.hasOwnProperty(d)&&(e=a[d],f.intersect(e)&&(e.x===f.x||e.y===f.y)&&B.unitAndUnit(f,e))},"battle")},score:function(a){var c=e.HAVE,h=a.mode,f=e.TYPE,a=a.type,g=L,d=e.POINT;a!==f.CASTLE&&h===c.USER||a===f.CASTLE&&h===c.ENEMY?g.add(d[a]):a===f.CASTLE&&
h===c.USER&&g.add(-d[a])},unitAndUnit:function(a,c){for(var e=a.hp,f=c.hp;e>0&&f>0;)e=a.attack(c),f=c.attack(a);a.checkDeath()&&(i.death(a),B.score(a));c.checkDeath()&&(i.death(c),B.score(c));E.vibrate(1)},siege:function(a,c){i.siege(c);c.damage(a);a.kill();E.vibrate(3);c.checkBreak()&&(i.castle(c),B.score(c))}},x={functions:{},exefunc:function(){var a,c=x.functions;for(a in c)if(c.hasOwnProperty(a))c[a]()},add:function(a,c){x.functions[c]=a},init:function(){q.addEventListener(enchant.Event.ENTER_FRAME,
x.exefunc,false)}};StatusViwer=function(){var a=new Label,c=new Group,h,f=e.STATUS_VIEWER,g=f.POSITION,d=q.assets[f.IMAGE],f=f.BG_SIZE,f=new Sprite(f[0],f[1]),b=e.UNIT.STATUS[C],i=e.HAVE.USER,m={},j,l;for(j in b)b.hasOwnProperty(j)&&(l=b[j],m[j]="<b>"+l.name+"</b><br />HP: "+l.hp+"<br />Armor: "+l.armor+"<br />Damage: "+l.damage+"<br />Speed: "+l.speed+"<br />DownTime: "+l.reverse+"sec");c.x=g[0];c.y=g[1];f.image=d;f.frame=0;a.font="9px/1.5 "+e.FONT;a.color="#fff";a.text="";a.x=45;a.y=8;h=new Unit({mode:i,
x:15,y:15,opacity:0});h.frame=0;h.direction=2;h.stay();c.update=function(b){h.opacity=1;c.update=function(b){a.text=m[b.name];h.changeUnit(b)};c.update(b)};c.addChild(f);c.addChild(a);c.addChild(h);return c};var i={logid:0,data:{time:0,unit:{USER:0,ENEMY:0},death:{USER:0,ENEMY:0},siege:{USER:0,ENEMY:0},castle:{USER:0,ENEMY:0}},unit:function(a){i.data.unit[a.mode]++},death:function(a){i.data.death[a.mode]++},siege:function(a){i.data.siege[a.mode]++},castle:function(a){i.data.castle[a.mode]++},send:function(){i.data.time=
Q.getDiff();console.log(JSON.stringify(i.data))},reset:function(){i.data={time:0,unit:{USER:0,ENEMY:0},death:{USER:0,ENEMY:0},siege:{USER:0,ENEMY:0},castle:{USER:0,ENEMY:0}}},init:function(){i.reset();i.end();i.logid=setInterval(i.send,3E4)},end:function(){i.send();clearInterval(i.logid)}};return U}(window);AW.init({race:"UNDEAD",order:"bone_dog,bone_snake,bone_warrier,bone_archer,golem,arachne,spector,shade".split(","),map:"\u25a0\u00d7\u25a0\u00d7\u25a0\u00d7\u25a0\u00d7,\u251c\u2500\u2524\u00d7\u2502\u00d7\u2502\u00d7,\u2502\u00d7\u2502\u00d7\u251c\u2500\u2524\u00d7,\u2502\u00d7\u2514\u2510\u2502\u00d7\u2502\u00d7,\u2514\u2510\u00d7\u251c\u2524\u00d7\u2514\u2510,\u00d7\u2502\u00d7\u2502\u2514\u2510\u00d7\u2502,\u00d7\u251c\u2500\u2524\u00d7\u2502\u00d7\u2502,\u00d7\u2502\u00d7\u2502\u00d7\u251c\u2500\u2524,\u00d7\u25a1\u00d7\u25a1\u00d7\u25a1\u00d7\u25a1".split(",")});
